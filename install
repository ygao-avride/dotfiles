#!/usr/bin/env bash
set -euo pipefail

# Resolve the absolute path to this script (dotfiles repo root)
DOTFILES_DIR="$(cd "$(dirname "$(readlink -f "$0")")" && pwd)"

# Symlink Git config files from dotfiles into home
ln -sf "${DOTFILES_DIR}/.gitconfig" ~
mkdir -p ~/.git/hooks
ln -sf "${DOTFILES_DIR}/git/pre-commit" ~/.git/hooks

# Append Zsh aliases and env vars if .zshrc exists
# NOTE: This assumes ~/.zshrc is not under dotfiles control
echo "âž• Appending custom shell config to ~/.zshrc..."
cat "${DOTFILES_DIR}/.zshrc" >> ~/.zshrc

ln -sf "${DOTFILES_DIR}/vscode/mcp.json" ~/.vscode

# # Install VS Code extensions
# echo "ðŸ“¦ Installing VS Code extensions..."
# python3 "${DOTFILES_DIR}/vscode/install_extensions.py"

echo
echo "âœ… Dotfiles installation complete."
echo "ðŸ§  You may want to restart your shell or run: source ~/.zshrc"